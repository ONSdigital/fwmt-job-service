language: java
jdk: oraclejdk8
services:
- docker
script:
- "./gradlew check --info"
after_success:
- bash <(curl -s https://codecov.io/bash)
env:
  - SPRING_PROFILES_ACTIVE=default,integration-tests
  - secure: fD+2/XSJLE063/14YLXEKD2PqT5nanNeFZcBuQXSxTl5VpQRuQf3Kk1sVwjIFNtwCLESfikIYDFoTnmoW9GXvMrweMp4G3+D2vb/f3a4LajKg8G29C4+Tdkqe2OquUoc6xt08XhjoH+vEUWmNXZJUlFYCkcnEOdS6WP7xg1ODiiTVNHde6LcgE2ReDy+/nXrQIDhiGG1FV75ztLBwmC1YdldyyiOYxGJqi50SdTX+S3he+J7ZcnsgnB9kpoFvz5gI5maCUzSyJ1FwxDH6iyynl9qDsa9JGnCg4Iip7xtt9XJnVaNfSNou2K5DBa90uG65/j+qhTTB2P/+6hxbe/dKsTZjBayMAEl9Q7L1ZzOz7AbYQKreCeAFOyygXUWUU4q5hVH6YSnabmFqtJItPuS+lkE8zngRis26GC3pmZkfa4MnKGnXcXbji22zh0r2BBwgKsyLHkPPnrCZKtAEA699h5SGXswSjes0q51ARiuHFIvAoD3b8O9ZP4IATcOqXkWp/faXx2iqqan2eonnADsCXFbZf+63kfsmFr8yvYUeaSFQeAS/KiV2kf1Py6RnsxZApUah/aNJrySi74Rx9bPbEIP6r/2Z1N8AYxbcyFLih9NcHeVdbTjpv6iVg4btpJ/uHMtE7mqb/Kp58NyExQrn9XqbJpjopdT3kYHwCjeU2w=
  - secure: tA70irioDQY346/id+12Tdo/1BXY589oQMFbyxaqWve88cq2M0pHKY/JfEOVKIScrZcY3+pSduNdkVKb9Xf6O0e/QoBSdCTKj56x8ZTFEmmjFe20KHeYUvSOO820cPVFD5OCFGqHO5rvJJjuOZncPXEu08KcnGUmLuBlbVqC9O0suMH47xHPSFWnl/fH1LPSRzBAGhqKQVmpvnKwuXF4+5X/dTHYfqVRxKsZqfN64+fx7hut+IbVimPGLeUESrhMtCpGww+yQDO9/88SwG8zdWR+l7HELPeT/Z8qkvgM4ManaNXW2aIkrmLYQ7lIDFW8h5i05QG0URVR5jKTyGpSQrIJHGIi7ROw3aZCp237cB1QowVnaZcqKXNWQHRQSq8/+OCHyItb7qXs3UuVINa7Xd3x/8Kp6PqP8UVAvBMSkcHb9A4HBKdi34+CkzdJPr5FygzzJDAe6rg6v8nG6AXOswxOrUMei8DH4a4e8cLcRjeLRwCLMrV1abJyldJ/4VhSCr6pwJctcwkXyiaAXj2HIoQabw0G5hlLyY18CIBOqYIzufUeQp9U1vm4SvKpOjNtGINw51uD9V6P5f/4c9YZxjfLLeeGvXSjR+/Beo5KgnTnjkkcY0eecHNWd2V5EaszXVVndBufY3vyZA2B9osIN6EVOai7z8CCKYapjMcEs04=
branches:
  only:
  - master
notifications:
  slack:
    secure: zeLxHE+z8RXsge7imwHbv4HuqpsMWlnvDXovlZH3iQW//6TrsgYT4arEp/NDV6jTYtMgLWmm4ou2nLu+AaYLmXIkp4Pt8z0xKnx8NPT8UsZn7f6gqK7Abah4YnrB4uHwnVzzVNlb0jmjWClVCNxR73GI+324pnxOjOSP4In8iCwX+fm9yKAhlaE1VMTVsjE2oTl+ECECmG4fWmDthg1gb6edLquUX04fhc0gDBmQ4c0mxoBSfhAI3eV22IehOiRMBwElPAcfZ0bWDK19AniGfYeyWYX+a1v4Mxy880oxsFIeCqJBQTw7j0DslF0VoZeJw2GTsecC2FTB9JiYX24wy/hCsAtwIZB/JX4znx5CsyDbKpvL1bcfKLg0MuBbZAkqFLS6K0pppgMd1McH2Og+ZTZyIogbWtW4Hvvgn9fNoU3RosxM3xwRcI560DjGdEKjuZikxC5mcuMuiNKR7rFNL8wA5beHc+yNBoF2VHuuJOG4zTgG0FOfdn4Chd9b+NN23Jhdny0WwCOfFneVfOkgkAvlvtN73YImlKHYBb3rE9/+lqAuwxmpYumKrkOFt95WW4vEBW2mUi4txYNK8uuTVA7CM+/h8mkAcgX9f0uES+fRA5/vegPnZuRVcnGhgLEQZ4EgYts0jJtYI+RzPuSMiMDA2R/Prgq/SvPhTmBwWxE=
    on_failure: always
    on_success: never
after_script: if [ "$TRAVIS_BRANCH" = "master" ]; then echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin; docker build -t fwmtjobsvc --build-arg jar=build/libs/fwmt-job-service-1.0.0.jar .; docker tag fwmtjobsvc sdcplatform/fwmtjobsvc; docker push sdcplatform/fwmtjobsvc;fi
